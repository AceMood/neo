{"version":3,"sources":["Image-Spec.js"],"names":[],"mappings":"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","file":"Image-Spec-compiled.js","sourcesContent":["/**\n * The MIT License (MIT)\n * Copyright (c) 2015 AceMood\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n * @file Image资源功能测试\n * @author AceMood\n */\n\n/* globals describe */\n/* globals it */\n\ndescribe('Image Resource', function() {\n\n  var expect = require('chai').expect;\n  var node_path = require('path');\n  var fs = require('fs');\n  var Image = require('./resource/Image');\n\n  var testData = node_path.join(__dirname, '..', '__test_data__', 'Image');\n  var constData =\n    'data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAA' +\n    'gAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QM' +\n    'taHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hw' +\n    'YWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIe' +\n    'nJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOn' +\n    'g9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSB' +\n    'YTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIv' +\n    'MDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGI' +\n    'HhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS' +\n    '8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3J' +\n    'pcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0' +\n    'cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6e' +\n    'G1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC' +\n    '9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmU' +\n    'uY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4' +\n    'bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDU' +\n    'zYgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9In' +\n    'htcC5paWQ6OUY2MEM0NjlBQzZEMTFFNTlDRkJCNDFFNjB' +\n    'DQkVDMEQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6' +\n    'OUY2MEM0NkFBQzZEMTFFNTlDRkJCNDFFNjBDQkVDMEQiP' +\n    'iA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2' +\n    'VJRD0ieG1wLmlpZDo5RjYwQzQ2N0FDNkQxMUU1OUNGQkI' +\n    '0MUU2MENCRUMwRCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1w' +\n    'LmRpZDo5RjYwQzQ2OEFDNkQxMUU1OUNGQkI0MUU2MENCR' +\n    'UMwRCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6Uk' +\n    'RGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI' +\n    '/Pv/uAA5BZG9iZQBkwAAAAAH/2wCEAAYEBAQFBAYFBQYJ' +\n    'BgUGCQsIBgYICwwKCgsKCgwQDAwMDAwMEAwODxAPDgwTE' +\n    'xQUExMcGxsbHB8fHx8fHx8fHx8BBwcHDQwNGBAQGBoVER' +\n    'UaHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8' +\n    'fHx8fHx8fHx8fHx8fHx8fH//AABEIAGQAZAMBEQACEQED' +\n    'EQH/xABLAAEBAAAAAAAAAAAAAAAAAAAACAEBAAAAAAAAA' +\n    'AAAAAAAAAAAABABAAAAAAAAAAAAAAAAAAAAABEBAAAAAA' +\n    'AAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AqkAAAAAAAAA' +\n    'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' +\n    'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' +\n    'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' +\n    'AAAAAAAAAAAAAAAAAAAAAAAAH/2Q==';\n\n  it('should have a image type', function() {\n    var img = new Image('a.png');\n    expect(img.type).to.equal('image');\n  });\n\n  it('should have a relative path', function() {\n    var img = new Image('a.png');\n    expect(img.path).to.deep.equal('a.png');\n  });\n\n  it('should have a null id', function() {\n    var img = new Image('a.png');\n    expect(img.id).to.be.null;\n  });\n\n  it('should can retrieve file content', function() {\n    var img = new Image(node_path.join(testData, 'empty.jpg'));\n    expect(img.getContent('base64')).to.deep.equal(constData.split(',')[1]);\n  });\n\n  xit('should can set file content', function() {\n    var img = new Image(node_path.join(testData, 'empty.jpg'));\n    img.setContent('');\n    expect(img.getContent()).to.deep.equal('');\n    img.setContent(constData);\n  });\n\n  it('should can get content with diff encoding', function() {\n    var img = new Image(node_path.join(testData, 'empty.jpg'));\n    expect(img.getContent('utf8')).to.not.equal(constData);\n    expect(img.getContent('base64')).to.deep.equal(constData.split(',')[1]);\n  });\n\n  it('should flush content to destination', function(done) {\n    var img = new Image(node_path.join(testData, 'empty.jpg'));\n    var distp = node_path.join(testData, 'dist.jpg');\n    img.flush(distp, function() {\n      var img = new Image(distp);\n      expect(img.getContent('base64')).to.deep.equal(constData.split(',')[1]);\n      fs.unlinkSync(distp);\n      done();\n    });\n  });\n});\n"]}